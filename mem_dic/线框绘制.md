# 线框绘制系列笔记

​	其实叫笔记也不对，反正就是自己在瞎鼓捣这些的一些东西的发现。类似于日志？但是是每个模块结束后才写的，相当于复习一下？

​	不过写的时候吃了不少苦头，每次做出创新的时候总会出现各种问题，最后大段的删除被迫改成老师写的样式（也是fastmath被分离的原因之一），这这些东西最好还是做个选项而不是写个别的，</b>永远要留下能够运行的版本!</b>  

## exgcd问题

应该能够发现最后tinyrender使用了一个exgcd的方法，并且用int来避免速度损失。但首先现在double等带来的速度损失是相对很小了，然后是exgcd在这里这种方法会产生精度损失，所以最后我在绘制的时候还是用了经典方法。

## 代码匹配问题

在编写的时候有时候实在发现不了问题，会进行代码匹配，vscode是自带有的。选中两个文件后   



![image-20211128140429082](C:\Users\x\AppData\Roaming\Typora\typora-user-images\image-20211128140429082.png)

进行匹配即可。

## 关于平台

通过与其他已经有开发经验的同学了解到cmake可以进行跨平台操作，暂时没有相关想法。sln项目也没有进行选择，主要是想体验一段时间的手动操作。makefile由于使用的是Linux，导致其实没法使用，过段时间将使用Linux系统进行一段时间的开发。（由于NeRf）

## 数学库

数学库暂时还没有进行太多的扩充，仅仅加上了三个向量与其运算。然后是加了一个fastmath库，用于一些优化算法的存储，暂时只加了快速幂，准备加上一些strasson，FFT/NTT等内容，只是觉得可能会用到。

未来可能加上一些stl中没有的数据结构库（或者分块库？），一些奇妙的算法也打算专门再开一个库。

## 关于支持的文件

目前支持了obj的读入与tga的输出，这主要是因为tiny是这么教的。未来打算完善obj的内容（可能在下一章），然后加上png/jpg文件的输出和off文件的输入，这些是最为常用的模型与输出格式。这个文件的书写依靠的是内存移动的方式进行的，赋值不是很好用，也许能对这方面进行一些操作。

预设的颜色库估计也要单独分离出来，调试的时候会更加方便。

## 关于obj文件的补充

obj的读取其实是偷懒了的，现在的obj读取只能支持f的//，也就是面、法向量方式，需要读取另一个文件要把它手动改成/模式，第二章将进行完善。还有一点是normalize问题，这个也是需要解决的，因为每个obj写的都不是很一样。

## 关于文件结构

现阶段model是单独的，其实这么做不太对，但已经写出来了。暂时设计的理想目录结构应该是resource开头的下分music、model等，并且最好留个脚本的空间，但现在还是学习各项基础功能的阶段，因此没有进行大调。

## 关于内存

还没有做，如果有个能够评价性能的模块就好了，继续加到自己的大饼里XD
